<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CodePen - MediaPipe HandLandmarker Task for web</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">
    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111">
    <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-2c7831bb44f98c1391d6a4ffda0e1fd302503391ca806e7fcc7b9b87197aec26.js"></script>
    <link rel="stylesheet" href="css/style.css">

    <script>
        window.console = window.console || function(t) {};
    </script>
</head>
  
<body translate="no">

<link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
  
<section id="demos" class="">
    <h1>Demo: v5 Webcam continuous hands landmarks detection</h1>
    <p>Hold your hand in front of your webcam to get real-time hand landmarker detection.<br>Click <b>enable webcam</b> below and grant access to the webcam if prompted.</p>

    <div id="liveView" class="videoView">
        <button id="webcamButton" class="mdc-button mdc-button--raised">
            <span class="mdc-button__ripple"></span>
            <span class="mdc-button__label">ENABLE WEBCAM</span>
        </button>
        <div id="try_on" style="position: relative;">
            <video id="webcam" style="position: abso" autoplay="" playsinline=""></video>
            <canvas class="output_canvas" id="output_canvas" style="position: absolute; left: 0px; top: 0px;"></canvas>
        </div>
    </div>

    <div id="landmarksOutput"></div> <!-- Вывод landmarks -->
</section>

// Enable or disable webcam and start detection
function enableCam(event) {
    if (!handLandmarker) {
        console.log("Wait! handLandmarker not loaded yet.");
        return;
    }

    if (enableWebcamButton.innerText === "DISABLE WEBCAM") {
        // Stop webcam video and hide try_on div
        stopWebcam();
        return;
    }

    if (webcamRunning) {
        // Stop webcam video and hide try_on div
        stopWebcam();
    } else {
        // Start webcam video and show try_on div
        startWebcam();
    }
}

// Stop webcam video and hide try_on div
function stopWebcam() {
    webcamRunning = false;
    enableWebcamButton.innerText = "ENABLE WEBCAM";
    video.srcObject = null;
    video.removeEventListener("loadeddata", predictWebcam);
    const tryOnDiv = document.getElementById("try_on");
    if (tryOnDiv) {
        tryOnDiv.style.display = "none";
    }
}

// Start webcam video and show try_on div
function startWebcam() {
    webcamRunning = true;
    enableWebcamButton.innerText = "DISABLE WEBCAM";
    const tryOnDiv = document.getElementById("try_on");
    if (tryOnDiv) {
        tryOnDiv.style.display = "block";
    }
    const constraints = {
        video: {
            facingMode: 'environment' // Use back camera
        }
    };
    navigator.mediaDevices.getUserMedia(constraints)
        .then((stream) => {
            video.srcObject = stream;
            video.addEventListener("loadeddata", predictWebcam);
        })
        .catch((error) => {
            console.error("Error accessing webcam:", error);
        });
}


  
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm/vision_wasm_internal.js" crossorigin="anonymous"></script>
</body>
</html>
